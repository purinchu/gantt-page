<!DOCTYPE html>
<html><head>
<meta charset="utf-8"/>
<title>Project Gantt generator</title>
<style>
html,body {
    width: 100%;
    height: 100%;
    margin: 0px;
}

div#content {
    display: grid;
    grid-template-columns: 1fr 2fr;
    grid-gap: 10px;

}

.chart {
    font-size: 12px;
}

.axis path,.axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
}

.bar {
    fill: #33b5e5;
}

.bar-failed {
    fill: #CC0000;
}

.bar-running {
    fill: #669900;
}

.bar-succeeded {
    fill: #33b5e5;
}

.bar-killed {
    fill: #ffbb33;
}
</style>
</head>
<body>
    <h3>Gantt Viewer</h3>

    <div id="content">
        <div id="input_wrapper">
            <textarea cols="50" rows="50" id="task_input">
                Enter your tasks.
            </textarea>
            <button id="btn_load_tasks">Load Tasks into Chart</button>
        </div>

        <div id="gantt_wrapper"></div>
    </div>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="gantt.js"></script>

    <script>
const tasks = [
    {
        "startDate" : new Date(2018, 3, 1),
        "endDate"   : new Date(2018, 3, 15),
        "taskName"  : "RMF Step 5",
        "status"    : "RUNNING"
    },
    {
        "startDate" : new Date(2018, 4, 1),
        "endDate"   : new Date(2018, 5, 15),
        "taskName"  : "A Job",
        "status"    : "RUNNING"
    }
];

// Maps task statuses to CSS class names
const taskStatus = {
    "SUCCEEDED" : "bar",
    "FAILED" : "bar-failed",
    "RUNNING" : "bar-running",
    "KILLED" : "bar-killed"
};

const taskNames = [ "D Job", "P Job", "RMF Step 5", "A Job", "N Job" ];

const maxDate = d3.max(tasks, (d) => d.endDate);
const minDate = d3.min(tasks, (d) => d.startDate);

const format = "%x";

let gantt = d3.gantt()
    .taskTypes(taskNames)
    .taskStatus(taskStatus)
    .tickFormat(format);

gantt(tasks);

let btnLoadTasks = document.getElementById('btn_load_tasks');
btnLoadTasks.addEventListener('click', (ev) => {
    console.log("Loading gantt chart!");
});

    </script>
</body></html>
