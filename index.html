<!DOCTYPE html>
<html><head>
<meta charset="utf-8"/>
<title>Project Gantt generator</title>
<style>
html,body,#wrapper {
    width: 100%;
    height: 100%;
    margin: 0px;
}

.chart {
    font-size: 12px;
}

.axis path,.axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
}

.bar {
    fill: #33b5e5;
}

.bar-failed {
    fill: #CC0000;
}

.bar-running {
    fill: #669900;
}

.bar-succeeded {
    fill: #33b5e5;
}

.bar-killed {
    fill: #ffbb33;
}
</style>
</head>
<body>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="gantt.js"></script>

    <script>
const tasks = [
    {
        "startDate" : new Date(2018, 3, 1),
        "endDate"   : new Date(2018, 3, 15),
        "taskName"  : "RMF Step 5",
        "status"    : "RUNNING"
    },
    {
        "startDate" : new Date(2018, 4, 1),
        "endDate"   : new Date(2018, 5, 15),
        "taskName"  : "A Job",
        "status"    : "RUNNING"
    }
];

// Maps task statuses to CSS class names
const taskStatus = {
    "SUCCEEDED" : "bar",
    "FAILED" : "bar-failed",
    "RUNNING" : "bar-running",
    "KILLED" : "bar-killed"
};

const taskNames = [ "D Job", "P Job", "RMF Step 5", "A Job", "N Job" ];

// TODO: Why not just use d3.min, d3.max here ???
tasks.sort((a, b) => a.endDate - b.endDate);
const maxDate = tasks[tasks.length - 1].endDate;

tasks.sort((a, b) => a.startDate - b.startDate);
const minDate = tasks[0].startDate;

const format = "%H:%M";

let gantt = d3.gantt()
    .taskTypes(taskNames)
    .taskStatus(taskStatus)
    .tickFormat(format);

gantt(tasks);
    </script>
</body></html>
